from typing import List, Dict, Any, Protocol, Literal

Op = Literal["ADD", "UPDATE", "DELETE", "NOOP"]


class MemoryAdapter(Protocol):
    """统一记忆接口：便于切换 Letta / Mem0 / MemGPT / A-MEM 等实现。"""
    def write(self, facts: List[Dict[str, Any]], *, scope: str = "long_term") -> None: ...
    def search(self, query: str, *, k: int = 10, page: int = 1, page_size: int = 50) -> List[Dict[str, Any]]: ...
    def update(self, patch: Dict[str, Any]) -> None: ...
    def summarize(self, items: List[Dict[str, Any]]) -> str: ...
    def decide_ops(self, candidate: Dict[str, Any], near: List[Dict[str, Any]]) -> Op: ...
